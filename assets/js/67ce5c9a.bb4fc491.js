"use strict";(self.webpackChunk_open_fabric_developer_docs=self.webpackChunk_open_fabric_developer_docs||[]).push([[3144],{11470(e,r,n){n.d(r,{A:()=>C});var a=n(96540),t=n(34164),i=n(17559),s=n(23104),c=n(56347),o=n(205),l=n(57485),d=n(31682),u=n(70679);function h(e){var r,n;return null!=(r=null==(n=a.Children.toArray(e).filter(function(e){return"\n"!==e}).map(function(e){if(!e||(0,a.isValidElement)(e)&&((r=e.props)&&"object"==typeof r&&"value"in r))return e;var r;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')}))?void 0:n.filter(Boolean))?r:[]}function p(e){var r=e.values,n=e.children;return(0,a.useMemo)(function(){var e=null!=r?r:function(e){return h(e).map(function(e){var r=e.props;return{value:r.value,label:r.label,attributes:r.attributes,default:r.default}})}(n);return function(e){var r=(0,d.XI)(e,function(e,r){return e.value===r.value});if(r.length>0)throw new Error('Docusaurus error: Duplicate values "'+r.map(function(e){return e.value}).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e},[r,n])}function f(e){var r=e.value;return e.tabValues.some(function(e){return e.value===r})}function v(e){var r=e.queryString,n=void 0!==r&&r,t=e.groupId,i=(0,c.W6)(),s=function(e){var r=e.queryString,n=void 0!==r&&r,a=e.groupId;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:n,groupId:t});return[(0,l.aZ)(s),(0,a.useCallback)(function(e){if(s){var r=new URLSearchParams(i.location.search);r.set(s,e),i.replace(Object.assign({},i.location,{search:r.toString()}))}},[s,i])]}function m(e){var r,n,t,i,s=e.defaultValue,c=e.queryString,l=void 0!==c&&c,d=e.groupId,h=p(e),m=(0,a.useState)(function(){return function(e){var r,n=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!f({value:n,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+a.map(function(e){return e.value}).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}var t=null!=(r=a.find(function(e){return e.default}))?r:a[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:s,tabValues:h})}),b=m[0],y=m[1],g=v({queryString:l,groupId:d}),x=g[0],j=g[1],_=(r=function(e){return e?"docusaurus.tab."+e:null}({groupId:d}.groupId),n=(0,u.Dv)(r),t=n[0],i=n[1],[t,(0,a.useCallback)(function(e){r&&i.set(e)},[r,i])]),w=_[0],C=_[1],k=function(){var e=null!=x?x:w;return f({value:e,tabValues:h})?e:null}();return(0,o.A)(function(){k&&y(k)},[k]),{selectedValue:b,selectValue:(0,a.useCallback)(function(e){if(!f({value:e,tabValues:h}))throw new Error("Can't select invalid tab value="+e);y(e),j(e),C(e)},[j,C,h]),tabValues:h}}var b=n(92303);const y="tabList__CuJ",g="tabItem_LNqP";var x=n(74848);function j(e){var r=e.className,n=e.block,a=e.selectedValue,i=e.selectValue,c=e.tabValues,o=[],l=(0,s.a_)().blockElementScrollPositionUntilNextRender,d=function(e){var r=e.currentTarget,n=o.indexOf(r),t=c[n].value;t!==a&&(l(r),i(t))},u=function(e){var r,n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":var a,t=o.indexOf(e.currentTarget)+1;n=null!=(a=o[t])?a:o[0];break;case"ArrowLeft":var i,s=o.indexOf(e.currentTarget)-1;n=null!=(i=o[s])?i:o[o.length-1]}null==(r=n)||r.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":n},r),children:c.map(function(e){var r=e.value,n=e.label,i=e.attributes;return(0,x.jsx)("li",Object.assign({role:"tab",tabIndex:a===r?0:-1,"aria-selected":a===r,ref:function(e){o.push(e)},onKeyDown:u,onClick:d},i,{className:(0,t.A)("tabs__item",g,null==i?void 0:i.className,{"tabs__item--active":a===r}),children:null!=n?n:r}),r)})})}function _(e){var r=e.lazy,n=e.children,i=e.selectedValue,s=(Array.isArray(n)?n:[n]).filter(Boolean);if(r){var c=s.find(function(e){return e.props.value===i});return c?(0,a.cloneElement)(c,{className:(0,t.A)("margin-top--md",c.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:s.map(function(e,r){return(0,a.cloneElement)(e,{key:r,hidden:e.props.value!==i})})})}function w(e){var r=m(e);return(0,x.jsxs)("div",{className:(0,t.A)(i.G.tabs.container,"tabs-container",y),children:[(0,x.jsx)(j,Object.assign({},r,e)),(0,x.jsx)(_,Object.assign({},r,e))]})}function C(e){var r=(0,b.A)();return(0,x.jsx)(w,Object.assign({},e,{children:h(e.children)}),String(r))}},19365(e,r,n){n.d(r,{A:()=>s});n(96540);var a=n(34164);const t="tabItem_Ymn6";var i=n(74848);function s(e){var r=e.children,n=e.hidden,s=e.className;return(0,i.jsx)("div",{role:"tabpanel",className:(0,a.A)(t,s),hidden:n,children:r})}},28453(e,r,n){n.d(r,{R:()=>s,x:()=>c});var a=n(96540);const t={},i=a.createContext(t);function s(e){const r=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),a.createElement(i.Provider,{value:r},e.children)}},28928(e,r,n){n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"AccountTokenization/VirtualCards/DisplayVirtualCards","title":"Virtual Cards","description":"Display a Virtual Card","source":"@site/docs/AccountTokenization/VirtualCards/DisplayVirtualCards.md","sourceDirName":"AccountTokenization/VirtualCards","slug":"/AccountTokenization/VirtualCards/DisplayVirtualCards","permalink":"/github.io/docs/AccountTokenization/VirtualCards/DisplayVirtualCards","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Account Tokenization","permalink":"/github.io/docs/tags/account-tokenization"},{"inline":true,"label":"Virtual Cards","permalink":"/github.io/docs/tags/virtual-cards"}],"version":"current","frontMatter":{"title":"Virtual Cards","tags":["Account Tokenization","Virtual Cards"]},"sidebar":"someSidebar","previous":{"title":"Create a virtual card","permalink":"/github.io/docs/AccountTokenization/VirtualCards/CreateVirtualCards"},"next":{"title":"Manage virtual cards","permalink":"/github.io/docs/AccountTokenization/VirtualCards/TokenManagement"}}');var t=n(74848),i=n(28453),s=n(11470),c=n(19365);const o={title:"Virtual Cards",tags:["Account Tokenization","Virtual Cards"]},l="Virtual Cards",d={},u=[{value:"Display a Virtual Card",id:"display-a-virtual-card",level:2},{value:"Retrieving a card fetch token",id:"retrieving-a-card-fetch-token",level:2},{value:"Displaying Virtual Card details",id:"displaying-virtual-card-details",level:2},{value:"Request access token with read card scope",id:"request-access-token-with-read-card-scope",level:3},{value:"Option A: Use the Card Details API",id:"option-a-use-the-card-details-api",level:3},{value:"Option B: Use Secure embedded widget to display the card details",id:"option-b-use-secure-embedded-widget-to-display-the-card-details",level:3}];function h(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"virtual-cards",children:"Virtual Cards"})}),"\n",(0,t.jsx)(r.h2,{id:"display-a-virtual-card",children:"Display a Virtual Card"}),"\n",(0,t.jsxs)(r.p,{children:["Handling card numbers (PANs) and CVV numbers requires that you comply with the ",(0,t.jsx)(r.a,{href:"https://www.pcisecuritystandards.org/",children:"Payment Card Industry Data Security Standards (PCI DSS)"}),"."]}),"\n",(0,t.jsx)(r.p,{children:"To help you reduce your compliance obligations, we offer you a secure way to retrieve and display virtual card details to your customers. We do this in two steps:"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:["First you need to call our API to retrieve a ",(0,t.jsx)(r.code,{children:"card_fetch_token"})]}),"\n",(0,t.jsxs)(r.li,{children:["After this you can use the ",(0,t.jsx)(r.code,{children:"card_fetch_token"})," to retrieve the card details securely"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"retrieving-a-card-fetch-token",children:"Retrieving a card fetch token"}),"\n",(0,t.jsxs)(r.p,{children:["To use the ",(0,t.jsx)(r.a,{href:"/apis#tag/Retrieve-Card-Details/operation/StaticTokenCardFetchToken",children:"Card Fetch Token API"}),", please specify the ",(0,t.jsx)(r.code,{children:"static_token_id"})," and ",(0,t.jsx)(r.code,{children:"account_id"})," of the Virtual Card you wish to fetch. Additionally, you can optionally specify a public encryption key for us to encrypt the card details."]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Sample request"})}),"\n",(0,t.jsxs)(s.A,{children:[(0,t.jsx)(c.A,{value:"NoEncryption",label:"Without encryption",default:!0,children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\r\n    "static_token_id":"c2319421-f0e8-4dd6-a099-124c5a3c6592",\r\n    "account_id": "436605a1-271d-49a7-80f0-bcaf095cdd6a"\r\n}\n'})})}),(0,t.jsx)(c.A,{value:"WithEncryption",label:"With encryption",default:!0,children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\r\n    "static_token_id":"c2319421-f0e8-4dd6-a099-124c5a3c6592",\r\n    "account_id": "436605a1-271d-49a7-80f0-bcaf095cdd6a",\r\n    "card_encryption_key": "-----BEGIN PUBLIC KEY-----\\nMII\u2026\\n-----END PUBLIC KEY-----",\r\n    "card_encryption_algo": "rsa_oaep"\r\n}\n'})})})]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Sample response"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\r\n    "card_fetch_token":"eyJhbGciOiJIUzI1...adQssw5c",\r\n}\n'})}),"\n",(0,t.jsx)(r.h2,{id:"displaying-virtual-card-details",children:"Displaying Virtual Card details"}),"\n",(0,t.jsxs)(r.p,{children:["With the ",(0,t.jsx)(r.code,{children:"card_fetch_token"}),", you can use Card Details API to fetch the sensitive card details (card number, expiry date and CVV). You can then present this information within a secure/restricted area (like logged-in page of your web-app or mobile-app)."]}),"\n",(0,t.jsx)(r.p,{children:"Alternatively, you can use our secure embedded widget to display the card details inside the web-app or mobile webview."}),"\n",(0,t.jsx)(r.h3,{id:"request-access-token-with-read-card-scope",children:"Request access token with read card scope"}),"\n",(0,t.jsxs)(r.p,{children:["It's recommended to use a separate access token to access card details. To request the new access token, setting the scope parameter to ",(0,t.jsx)(r.code,{children:"resources/cards.read"}),"."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",metastring:'title="Sample Authentication Request"',children:"curl --request POST \\\r\n --url https://auth.openfabric.co/oauth2/token \\ \r\n --header 'Authorization: Basic <Base64 Encoded Client Credentials>' \\\r\n --header 'Content-Type: application/x-www-form-urlencoded' \\\r\n --data 'grant_type=client_credentials' \\\r\n --data 'scope=resources/cards.read'\n"})}),"\n",(0,t.jsx)(r.h3,{id:"option-a-use-the-card-details-api",children:"Option A: Use the Card Details API"}),"\n",(0,t.jsxs)(r.p,{children:["You can use the ",(0,t.jsx)(r.a,{href:"/apis#tag/Retrieve-Card-Details/operation/fetchCardDetails",children:"Card Details API"})," to retrieve the card details directly."]}),"\n",(0,t.jsx)(r.admonition,{type:"warning",children:(0,t.jsxs)(r.p,{children:["The Card Details API is using our Issuer Base URL (see ",(0,t.jsx)(r.a,{href:"../Getting-Started/Overview#environments",children:"Environments"}),").\r\nPlease be aware that your system might be subject to a higher level of PCI DSS certification if you use this method."]})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Sample request"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\r\n    "card_fetch_token":"eyJhbGciOiJIUzI1...adQssw5c",\r\n}\n'})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Sample response"})}),"\n",(0,t.jsxs)(s.A,{children:[(0,t.jsx)(c.A,{value:"NoEncryption",label:"Without encryption",default:!0,children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\r\n    "provider": "mastercard",\r\n    "card_reference_id": "6b8fb780-9d21-4324-8671-e3e0a66fd4b8",\r\n    "card_number": "5476...8601",\r\n    "redacted_number": "************8601",\r\n    "cvv": "7...",\r\n    "expiry_month": "03",\r\n    "expiry_year": "26"\r\n}\n'})})}),(0,t.jsx)(c.A,{value:"WithEncryption",label:"With encryption",default:!0,children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\r\n    "provider": "mastercard",\r\n    "card_reference_id": "6b8fb780-9d21-4324-8671-e3e0a66fd4b8",\r\n    "encrypted_card_number": "VGhpc0lzQW5FbmNyeX\u2026\u2026B0ZWRUZXh0",\r\n    "redacted_number": "************8601",\r\n    "encrypted_cvv": "ZW5jcnlw\u2026\u2026dGVkQ1ZW",\r\n    "expiry_month": "03",\r\n    "expiry_year": "26"\r\n}\n'})})})]}),"\n",(0,t.jsx)(r.h3,{id:"option-b-use-secure-embedded-widget-to-display-the-card-details",children:"Option B: Use Secure embedded widget to display the card details"}),"\n",(0,t.jsx)(r.admonition,{type:"note",children:(0,t.jsxs)(r.p,{children:["Card encryption is required for the Secure embedded widget. You need to specify ",(0,t.jsx)(r.code,{children:"card_encryption_key"})," and ",(0,t.jsx)(r.code,{children:"card_encryption_algo"})," when requesting the card fetch token."]})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-html",metastring:'title="Sample HTML"',children:'<!DOCTYPE html>\r\n<html lang="en">\r\n  <head>\r\n    <meta charset="utf-8" />\r\n    <title>Card details</title>\r\n    <meta name="description" content="A demo of embedded card details widget" />\r\n    <meta name="viewport" content="width=device-width, initial-scale=1" />\r\n    <script src="https://assets.openfabric.co/scripts/openfabric.js"><\/script>\r\n  </head>\r\n  <body>\r\n    \x3c!-- Display the embedded card widget --\x3e\r\n      <div id="card-details">\r\n      </div>\r\n  </body>\r\n</html>\n'})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-javascript",metastring:'title="Sample JavaScript"',children:'const openfabric = OpenFabric(accessToken); // Bearer access token of Open Fabric (with "resources/cards.read" scope)\r\n\r\ndisplayCardDetails();\r\n\r\nasync function displayCardDetails() {\r\n  const response = await fetch("/card-fetch-token", {\r\n    method: "POST",\r\n  });\r\n  const { cardFetchToken } = await response.json();\r\n\r\n  const widget = await openfabric.initCardWidget({\r\n    card_fetch_token: cardFetchToken,\r\n    card_decryption_key: CARD_ENCRYPTION_PRIVATE_KEY,\r\n    card_decryption_algo: \'rsa_oaep\',\r\n  });\r\n\r\n  // Mount Widget\r\n  widget.mount(\'#card-details\');\r\n}\n'})})]})}function p(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}}}]);