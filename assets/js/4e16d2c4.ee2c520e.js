"use strict";(self.webpackChunk_open_fabric_developer_docs=self.webpackChunk_open_fabric_developer_docs||[]).push([[8060],{11470(e,n,t){t.d(n,{A:()=>A});var r=t(96540),i=t(34164),o=t(17559),a=t(23104),s=t(56347),l=t(205),d=t(57485),c=t(31682),u=t(70679);function p(e){var n,t;return null!=(n=null==(t=r.Children.toArray(e).filter(function(e){return"\n"!==e}).map(function(e){if(!e||(0,r.isValidElement)(e)&&((n=e.props)&&"object"==typeof n&&"value"in n))return e;var n;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')}))?void 0:t.filter(Boolean))?n:[]}function h(e){var n=e.values,t=e.children;return(0,r.useMemo)(function(){var e=null!=n?n:function(e){return p(e).map(function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes,default:n.default}})}(t);return function(e){var n=(0,c.XI)(e,function(e,n){return e.value===n.value});if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map(function(e){return e.value}).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e},[n,t])}function g(e){var n=e.value;return e.tabValues.some(function(e){return e.value===n})}function v(e){var n=e.queryString,t=void 0!==n&&n,i=e.groupId,o=(0,s.W6)(),a=function(e){var n=e.queryString,t=void 0!==n&&n,r=e.groupId;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=r?r:null}({queryString:t,groupId:i});return[(0,d.aZ)(a),(0,r.useCallback)(function(e){if(a){var n=new URLSearchParams(o.location.search);n.set(a,e),o.replace(Object.assign({},o.location,{search:n.toString()}))}},[a,o])]}function f(e){var n,t,i,o,a=e.defaultValue,s=e.queryString,d=void 0!==s&&s,c=e.groupId,p=h(e),f=(0,r.useState)(function(){return function(e){var n,t=e.defaultValue,r=e.tabValues;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!g({value:t,tabValues:r}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+t+'" but none of its children has the corresponding value. Available values are: '+r.map(function(e){return e.value}).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return t}var i=null!=(n=r.find(function(e){return e.default}))?n:r[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:a,tabValues:p})}),y=f[0],m=f[1],P=v({queryString:d,groupId:c}),k=P[0],b=P[1],x=(n=function(e){return e?"docusaurus.tab."+e:null}({groupId:c}.groupId),t=(0,u.Dv)(n),i=t[0],o=t[1],[i,(0,r.useCallback)(function(e){n&&o.set(e)},[n,o])]),j=x[0],A=x[1],w=function(){var e=null!=k?k:j;return g({value:e,tabValues:p})?e:null}();return(0,l.A)(function(){w&&m(w)},[w]),{selectedValue:y,selectValue:(0,r.useCallback)(function(e){if(!g({value:e,tabValues:p}))throw new Error("Can't select invalid tab value="+e);m(e),b(e),A(e)},[b,A,p]),tabValues:p}}var y=t(92303);const m="tabList__CuJ",P="tabItem_LNqP";var k=t(74848);function b(e){var n=e.className,t=e.block,r=e.selectedValue,o=e.selectValue,s=e.tabValues,l=[],d=(0,a.a_)().blockElementScrollPositionUntilNextRender,c=function(e){var n=e.currentTarget,t=l.indexOf(n),i=s[t].value;i!==r&&(d(n),o(i))},u=function(e){var n,t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":var r,i=l.indexOf(e.currentTarget)+1;t=null!=(r=l[i])?r:l[0];break;case"ArrowLeft":var o,a=l.indexOf(e.currentTarget)-1;t=null!=(o=l[a])?o:l[l.length-1]}null==(n=t)||n.focus()};return(0,k.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":t},n),children:s.map(function(e){var n=e.value,t=e.label,o=e.attributes;return(0,k.jsx)("li",Object.assign({role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:function(e){l.push(e)},onKeyDown:u,onClick:c},o,{className:(0,i.A)("tabs__item",P,null==o?void 0:o.className,{"tabs__item--active":r===n}),children:null!=t?t:n}),n)})})}function x(e){var n=e.lazy,t=e.children,o=e.selectedValue,a=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){var s=a.find(function(e){return e.props.value===o});return s?(0,r.cloneElement)(s,{className:(0,i.A)("margin-top--md",s.props.className)}):null}return(0,k.jsx)("div",{className:"margin-top--md",children:a.map(function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==o})})})}function j(e){var n=f(e);return(0,k.jsxs)("div",{className:(0,i.A)(o.G.tabs.container,"tabs-container",m),children:[(0,k.jsx)(b,Object.assign({},n,e)),(0,k.jsx)(x,Object.assign({},n,e))]})}function A(e){var n=(0,y.A)();return(0,k.jsx)(j,Object.assign({},e,{children:p(e.children)}),String(n))}},19365(e,n,t){t.d(n,{A:()=>a});t(96540);var r=t(34164);const i="tabItem_Ymn6";var o=t(74848);function a(e){var n=e.children,t=e.hidden,a=e.className;return(0,o.jsx)("div",{role:"tabpanel",className:(0,r.A)(i,a),hidden:t,children:n})}},28453(e,n,t){t.d(n,{R:()=>a,x:()=>s});var r=t(96540);const i={},o=r.createContext(i);function a(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(o.Provider,{value:n},e.children)}},43397(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"AccountTokenization/DigitalWalletTokens","title":"Digital Wallet Tokens","description":"Overview","source":"@site/docs/AccountTokenization/DigitalWalletTokens.md","sourceDirName":"AccountTokenization","slug":"/AccountTokenization/DigitalWalletTokens","permalink":"/github.io/docs/AccountTokenization/DigitalWalletTokens","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Account Tokenization","permalink":"/github.io/docs/tags/account-tokenization"},{"inline":true,"label":"Digital Wallet Tokens","permalink":"/github.io/docs/tags/digital-wallet-tokens"},{"inline":true,"label":"Google Pay","permalink":"/github.io/docs/tags/google-pay"},{"inline":true,"label":"Apple Pay","permalink":"/github.io/docs/tags/apple-pay"},{"inline":true,"label":"Samsung Pay","permalink":"/github.io/docs/tags/samsung-pay"}],"version":"current","frontMatter":{"title":"Digital Wallet Tokens","tags":["Account Tokenization","Digital Wallet Tokens","Google Pay","Apple Pay","Samsung Pay"]},"sidebar":"someSidebar","previous":{"title":"Handle Tap and Pay transactions","permalink":"/github.io/docs/AccountTokenization/OwnAppTokens/TransactionInitiation"},"next":{"title":"Overview","permalink":"/github.io/docs/AccountTokenization/VirtualCards/Overview"}}');var i=t(74848),o=t(28453),a=t(11470),s=t(19365);const l={title:"Digital Wallet Tokens",tags:["Account Tokenization","Digital Wallet Tokens","Google Pay","Apple Pay","Samsung Pay"]},d="Digital Wallet Tokens",c={},u=[{value:"Overview",id:"overview",level:2},{value:"Request push provisioning access with the digital wallet (prerequisite)",id:"request-push-provisioning-access-with-the-digital-wallet-prerequisite",level:2},{value:"Apple Pay",id:"apple-pay",level:3},{value:"Google Pay",id:"google-pay",level:3},{value:"Samsung Pay",id:"samsung-pay",level:3},{value:"Displaying the &quot;Add to Wallet&quot; button",id:"displaying-the-add-to-wallet-button",level:2},{value:"Provisioning account token into the wallet",id:"provisioning-account-token-into-the-wallet",level:2},{value:"Tokenizing a customer&#39;s account",id:"tokenizing-a-customers-account",level:3},{value:"Push the provisioned token into the wallet",id:"push-the-provisioned-token-into-the-wallet",level:3},{value:"Checking provisioned token status in the Digital Wallet",id:"checking-provisioned-token-status-in-the-digital-wallet",level:2},{value:"Removing a token from the digital wallet",id:"removing-a-token-from-the-digital-wallet",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"digital-wallet-tokens",children:"Digital Wallet Tokens"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"Digital Wallet Tokens allow you to tokenize accounts within a third-party digital wallet, such as Google Pay, Apple Pay and Samsung Pay. Your customers can pay anywhere the digital wallet is accepted, such as in stores using NFC Tap and Pay."}),"\n",(0,i.jsxs)(n.p,{children:["Open Fabric provides a standalone SDK to enable push provisioning into digital wallets, please refer to ",(0,i.jsx)(n.a,{href:"../Getting-Started/SDKs",children:"our Getting Started guide"})," to learn how to set up the SDK within your project."]}),"\n",(0,i.jsx)(n.p,{children:"In this guide we'll explain:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"How to request push provisioning access with Apple, Google or Samsung"}),"\n",(0,i.jsx)(n.li,{children:"How to display the Add to Wallet button"}),"\n",(0,i.jsx)(n.li,{children:"How to provision an account token into the digital wallet"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"request-push-provisioning-access-with-the-digital-wallet-prerequisite",children:"Request push provisioning access with the digital wallet (prerequisite)"}),"\n",(0,i.jsx)(n.p,{children:"Before you can start, you need to make sure that your app is registered with the digital wallet and approved to provision cards into their wallet."}),"\n",(0,i.jsx)(n.h3,{id:"apple-pay",children:"Apple Pay"}),"\n",(0,i.jsxs)(n.p,{children:["In order for you to enable in-app provisioning of your customers' virtual cards into their Apple Wallet, you need to obtain approval from Apple, which includes granting the required Apple Pay entitlements. This is initiated by sending a request to ",(0,i.jsx)(n.a,{href:"mailto:applepayentitlements@apple.com",children:"applepayentitlements@apple.com"})," with the following information:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Request to enable Apple Pay push provisioning in your app."}),"\n",(0,i.jsx)(n.li,{children:"Issuer Name, or the name of your BIN Sponsor."}),"\n",(0,i.jsx)(n.li,{children:"Country Code: e.g. SG, ID"}),"\n",(0,i.jsx)(n.li,{children:"App Name"}),"\n",(0,i.jsx)(n.li,{children:'Adam ID: available in the "General: App Information" tab on your App page in App Store Connect.'}),"\n",(0,i.jsx)(n.li,{children:"Team ID: available on your Account page in Apple Developer Portal"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Once approved by Apple, you will need to share the following information with Open Fabric"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Adam ID"}),"\n",(0,i.jsx)(n.li,{children:"App Bundle ID"}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"There may be a need for a commercial agreement/contract with Apple before they release the entitlements."})}),"\n",(0,i.jsx)(n.h3,{id:"google-pay",children:"Google Pay"}),"\n",(0,i.jsxs)(n.p,{children:["In order for you to enable in-app provisioning of your customers' virtual cards into their Google Pay Wallet, you need to obtain approval from Google by following this Get Started guide ",(0,i.jsx)(n.a,{href:"https://developers.google.com/pay/issuers/overview/get-started",children:"https://developers.google.com/pay/issuers/overview/get-started"})]}),"\n",(0,i.jsx)(n.h3,{id:"samsung-pay",children:"Samsung Pay"}),"\n",(0,i.jsx)(n.p,{children:"In order for you to enable in-app provisioning of your customers' virtual cards into their Samsung Pay Wallet, you need to obtain approval from Samsung by following these steps:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Sign Up for Samsung Pay Developers account: ",(0,i.jsx)(n.a,{href:"https://pay.samsung.com/developers/tour/memberguide",children:"https://pay.samsung.com/developers/tour/memberguide"})]}),"\n",(0,i.jsxs)(n.li,{children:["Create Service for App to App card enrollment: ",(0,i.jsx)(n.a,{href:"https://pay.samsung.com/developers/tour/svcguide",children:"https://pay.samsung.com/developers/tour/svcguide"})]}),"\n",(0,i.jsxs)(n.li,{children:["Download Samsung Pay SDK and register app: ",(0,i.jsx)(n.a,{href:"https://pay.samsung.com/developers/tour/appsguide",children:"https://pay.samsung.com/developers/tour/appsguide"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"displaying-the-add-to-wallet-button",children:'Displaying the "Add to Wallet" button'}),"\n",(0,i.jsx)(n.p,{children:'In order to push a virtual card into the respective wallet, you will need to present an "Add to Wallet" button as an option for your customers in your application.'}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["Display this button only if the customer\u2019s token is not yet pushed to the wallet. See ",(0,i.jsx)(n.a,{href:"#checking-provisioned-token-status-in-the-digital-wallet",children:"Checking provisioned token status in wallet"})," on how to verify this."]})}),"\n",(0,i.jsxs)(a.A,{children:[(0,i.jsx)(s.A,{value:"AddToApplePay",label:"Add to Apple Wallet",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:'import PassKit\r\n\r\nclass PaymentCardProvisioningViewController: UIViewController {\r\n  override func viewDidLoad() {\r\n    super.viewDidLoad()\r\n\r\n    // Check if the device supports adding payment passes\r\n    if PKAddPaymentPassViewController.canAddPaymentPass() {\r\n      // Create the "Add to Apple Wallet" button\r\n      let addPassButton = PKAddPassButton()\r\n      // Add handler for the button\r\n      addPassButton.addTarget(\r\n        self, action: #selector(addPaymentPassButtonTapped), for: .touchUpInside)\r\n\r\n      // Add code to position the button\r\n\r\n      // Add the button to the view\r\n      view.addSubview(addPassButton)\r\n    } else {\r\n      print("This device doesn\'t support adding payment passes.")\r\n    }\r\n  }\r\n\r\n  // other code\r\n}\n'})})}),(0,i.jsx)(s.A,{value:"AddToGooglePay",label:"Add to Google Pay",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"class PushProvisioningActivity: AppCompatActivity() {\r\n  private lateinit var addToGooglePayButton: Button\r\n\r\n  override fun onCreate(savedInstanceState: Bundle?) {\r\n    super.onCreate(savedInstanceState)\r\n    setContentView(R.layout.activity_push_provisioning)\r\n\r\n    addToGooglePayButton = findViewById(R.id.button_add_to_gpay)\r\n\r\n    addToGooglePayButton.setOnClickListener {\r\n      pushProvisionPaymentCard()\r\n    }\r\n  }\r\n\r\n  // other code\r\n}\n"})})}),(0,i.jsx)(s.A,{value:"AddToSamsungPay",label:"Add to Samsung Pay",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:'class PushProvisioningActivity: AppCompatActivity() {\r\n  private lateinit var addToSamsungPayButton: Button\r\n\r\n  override fun onCreate(savedInstanceState: Bundle?) {\r\n    super.onCreate(savedInstanceState)\r\n    setContentView(R.layout.activity_push_provisioning)\r\n\r\n    addToSamsungPayButton = findViewById(R.id.button_add_to_spay)\r\n\r\n    addToSamsungPayButton.setOnClickListener {\r\n      pushProvisionPaymentCard()\r\n    }\r\n\r\n    // Check eligibility and show/hide "Add to Samsung Pay" button\r\n    checkEligibilityAndUpdateUI()\r\n  }\r\n\r\n  private fun checkEligibilityAndUpdateUI() {\r\n    val partnerInfo = PartnerInfoHolder.getInstance(this@PushProvisioningActivity).partnerInfo\r\n    val samsungPay = SamsungPay(this@PushProvisioningActivity, partnerInfo)\r\n\r\n    samsungPay.getSamsungPayStatus(object : StatusListener {\r\n      override fun onSuccess(status: Int, bundle: Bundle?) {\r\n        if (status == SpaySdk.SPAY_READY) {\r\n          addToSamsungPayButton.visibility = View.VISIBLE\r\n        } else {\r\n          addToSamsungPayButton.visibility = View.GONE\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  // other code\r\n}\n'})})})]}),"\n",(0,i.jsx)(n.h2,{id:"provisioning-account-token-into-the-wallet",children:"Provisioning account token into the wallet"}),"\n",(0,i.jsx)(n.p,{children:'When a customer clicks on "Add to Google Pay" button, you will need to:'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Tokenize a customer's account"}),"\n",(0,i.jsx)(n.li,{children:"Push the token into the wallet"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"tokenizing-a-customers-account",children:"Tokenizing a customer's account"}),"\n",(0,i.jsx)(n.p,{children:"To initiate a push provisioning for a given customer\u2019s account, request a one-time push provisioning token (similar to an access token) for that account from your backend."}),"\n",(0,i.jsx)(n.p,{children:"This provisioning token is passed to Open Fabric\u2019s Push Provisioning SDK in the next step."}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"For security reasons, it is essential to make the API call from the backend."})}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.a,{href:"/apis#tag/Provision-Account/operation/PbAProvision",children:"Provision API"}),", with the following parameters:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"type"})," set to ",(0,i.jsx)(n.code,{children:"push_provision"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"instrument"})," set to ",(0,i.jsx)(n.code,{children:"apple_pay"}),", ",(0,i.jsx)(n.code,{children:"google_pay"})," or ",(0,i.jsx)(n.code,{children:"samsung_pay"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The API will respond back to you with a ",(0,i.jsx)(n.code,{children:"provision_token"})," which then needs to be handed back to the SDK for the next step."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"tenant_customer_ref"})," and ",(0,i.jsx)(n.code,{children:"tenant_account_ref"})," are required fields and need to be filled with a reference to your customer and their account."]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"tenant_account_ref"})," if you want to distinguish different funding sources. But if customers do not have multiple accounts in your system, you may also choose to copy the value of ",(0,i.jsx)(n.code,{children:"tenant_customer_ref"})," in this field."]})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Sample request"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Headers:\r\n  Idempotency-Key: 40709949-0712-487c-a2fe-1dd2e64af506\n"})}),"\n",(0,i.jsxs)(a.A,{children:[(0,i.jsx)(s.A,{value:"applePay",label:"Apple Pay",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "type": "push_provision",\r\n  "instrument": "apple_pay",\r\n  "tenant_customer_ref": "customer-00000000000001",\r\n  "tenant_account_ref": "FR00000000000001",\r\n  "tenant_token_ref": "TOK000000000000001",\r\n  "billing_currency": "PHP",\r\n  "billing_address": {\r\n    "address_line_1": "8751 Paseo de Roxas St.",\r\n    "address_line_2": "",\r\n    "city": "Makati City",\r\n    "state": "Metro Manila",\r\n    "post_code": "1226",\r\n    "country_code": "PH"\r\n  }\r\n}\n'})})}),(0,i.jsx)(s.A,{value:"googlePay",label:"Google Pay",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "type": "push_provision",\r\n  "instrument": "google_pay",\r\n  "tenant_customer_ref": "customer-00000000000001",\r\n  "tenant_account_ref": "FR00000000000001",\r\n  "tenant_token_ref": "TOK000000000000001",\r\n  "billing_currency": "PHP",\r\n  "billing_address": {\r\n    "address_line_1": "8751 Paseo de Roxas St.",\r\n    "address_line_2": "",\r\n    "city": "Makati City",\r\n    "state": "Metro Manila",\r\n    "post_code": "1226",\r\n    "country_code": "PH"\r\n  }\r\n}\n'})})}),(0,i.jsx)(s.A,{value:"samsungPay",label:"Samsung Pay",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "type": "push_provision",\r\n  "instrument": "samsung_pay",\r\n  "tenant_customer_ref": "customer-00000000000001",\r\n  "tenant_account_ref": "FR00000000000001",\r\n  "tenant_token_ref": "TOK000000000000001",\r\n  "billing_currency": "PHP",\r\n  "billing_address": {\r\n    "address_line_1": "8751 Paseo de Roxas St.",\r\n    "address_line_2": "",\r\n    "city": "Makati City",\r\n    "state": "Metro Manila",\r\n    "post_code": "1226",\r\n    "country_code": "PH"\r\n  }\r\n}\n'})})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Sample response"})}),"\n",(0,i.jsxs)(a.A,{children:[(0,i.jsx)(s.A,{value:"applePay",label:"Apple Pay",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n    "digital_token_id": "c2319421-f0e8-4dd6-a099-124c5a3c6592",\r\n    "provision_token": "eyJraWQiOiIySGhTQUNV...",\r\n    "customer_id": "24ae8cd0-301d-4b2b-807b-09683f334bdd",\r\n    "instrument":  "apple_pay",\r\n    "locked": false,\r\n    "status": "inactive",\r\n    "tenant_account_ref": "FR00000000000001",\r\n    "tenant_customer_ref": "customer-00000000000001",\r\n    "tenant_token_ref": "TOK000000000000001",\r\n    "account_id": "436605a1-271d-49a7-80f0-bcaf095cdd6a",\r\n    "created_at": "2024-03-20T14:05:14.711+08:00",\r\n    "updated_at": "2024-03-20T14:05:14.711+08:00"\r\n}\r\n\n'})})}),(0,i.jsx)(s.A,{value:"googlePay",label:"Google Pay",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n    "digital_token_id": "c2319421-f0e8-4dd6-a099-124c5a3c6592",\r\n    "provision_token": "eyJraWQiOiIySGhTQUNV...",\r\n    "customer_id": "24ae8cd0-301d-4b2b-807b-09683f334bdd",\r\n    "instrument":  "google_pay",\r\n    "locked": false,\r\n    "status": "inactive",\r\n    "tenant_account_ref": "FR00000000000001",\r\n    "tenant_customer_ref": "customer-00000000000001",\r\n    "tenant_token_ref": "TOK000000000000001",\r\n    "account_id": "436605a1-271d-49a7-80f0-bcaf095cdd6a",\r\n    "created_at": "2024-03-20T14:05:14.711+08:00",\r\n    "updated_at": "2024-03-20T14:05:14.711+08:00"\r\n}\r\n\n'})})}),(0,i.jsx)(s.A,{value:"samsungPay",label:"Samsung Pay",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n    "digital_token_id": "c2319421-f0e8-4dd6-a099-124c5a3c6592",\r\n    "provision_token": "eyJraWQiOiIySGhTQUNV...",\r\n    "customer_id": "24ae8cd0-301d-4b2b-807b-09683f334bdd",\r\n    "instrument": "samsung_pay",\r\n    "locked": false,\r\n    "status": "inactive",\r\n    "tenant_account_ref": "FR00000000000001",\r\n    "tenant_customer_ref": "customer-00000000000001",\r\n    "tenant_token_ref": "TOK000000000000001",\r\n    "account_id": "436605a1-271d-49a7-80f0-bcaf095cdd6a",\r\n    "created_at": "2024-03-20T14:05:14.711+08:00",\r\n    "updated_at": "2024-03-20T14:05:14.711+08:00"\r\n}\n'})})})]}),"\n",(0,i.jsx)(n.h3,{id:"push-the-provisioned-token-into-the-wallet",children:"Push the provisioned token into the wallet"}),"\n",(0,i.jsxs)(n.p,{children:["After acquiring the ",(0,i.jsx)(n.code,{children:"provision_token"}),", it can be pushed into the wallet, along with additional provisioning configuration such as cardholder/customer name, card display name, etc."]}),"\n",(0,i.jsxs)(a.A,{children:[(0,i.jsx)(s.A,{value:"applePay",label:"Apple Pay",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:'class PaymentCardProvisioningViewController: UIViewController {\r\n  // other code\r\n\r\n  @objc func addPaymentPassButtonTapped() {\r\n    // Call backend to request push provisioning token from OF\r\n    let provisionToken = "..."\r\n\r\n    // Initialize OFPushProvisioningSDK\r\n    let ofPushProvisionSdk = OfPushProvisionSdk()\r\n\r\n    // Configure provisioning parameters\r\n    let provisionConfig = ProvisionConfiguration()\r\n    provisionConfig.provisionToken = provisionToken\r\n    provisionConfig.cardHolderName = "..."\r\n    provisionConfig.cardDisplayName = "..."\r\n\r\n    // Start provisioning\r\n    ofPushProvisionSdk.startProvisioning(\r\n      viewController: self,\r\n      configuration: provisionConfig,\r\n      completion: {\r\n        result in\r\n        switch result {\r\n        case .success(let message):\r\n          print("Static Token is successfully added into the wallet.")\r\n        case .failure(let err):\r\n          print(err.localizedDescription)\r\n        }\r\n      }\r\n    )\r\n  }\r\n}\n'})})}),(0,i.jsx)(s.A,{value:"googlePay",label:"Google Pay",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:'class PushProvisioningActivity: AppCompatActivity() {\r\n  private lateinit var ofPushProvisionSdk: OfPushProvisionSdk;\r\n  // other code\r\n\r\n  // Handle onActivityResult with OfPushProvisionSdk.PUSH_PROVISIONING_REQUEST_CODE\r\n  override fun onActivityResult(requestCode: Int,resultCode: Int,  data: Intent?) {\r\n    super.onActivityResult(requestCode, resultCode, data)\r\n\r\n    // Handle the push provisioning callback from Google Pay\r\n    val status = sdk.onActivityResult(this, requestCode, resultCode, data);\r\n    if (status === PushProvisionActivityResultStatus.TOKENIZE_SUCCESS) {\r\n        issuerTokenId = data?.getStringExtra(TapAndPay.EXTRA_ISSUER_TOKEN_ID)\r\n    } else if (status === PushProvisionActivityResultStatus.DELETE_TOKEN_SUCCESS) {\r\n        Log.i("TapAndPay", "Account has been removed from Google Wallet.")\r\n    } else if(status === PushProvisionActivityResultStatus.TOKENIZE_FAIL || status === PushProvisionActivityResultStatus.DELETE_TOKEN_FAIL) {\r\n        val errorMessage = data?.getStringExtra(OfPushProvisionSdk.EXTRA_ERROR_MESSAGE) ?: "Unknown error"\r\n        Toast.makeText(this, "Google Wallet Error: $errorMessage", Toast.LENGTH_SHORT).show()\r\n    } \r\n  }\r\n\r\n  private fun pushProvisionPaymentCard() {\r\n    // Call backend to request wallet provisioning token from OF\r\n    val provisionToken = "..."\r\n\r\n    // Initialize OfWalletProvisioningSDK\r\n    ofPushProvisionSdk = OfPushProvisionSdk.getInstance(\r\n      environment = OfEnvironment.Prod\r\n    )\r\n\r\n    // Configure provisioning parameters\r\n    val provisionConfig = ProvisionConfiguration(\r\n      provisionToken = provisionToken,\r\n      cardHolderName = "...",\r\n      cardDisplayName = "..."\r\n    )\r\n\r\n    // Start provisioning\r\n    ofPushProvisionSdk.startProvisioning(\r\n      activity = this@PushProvisioningActivity,\r\n      configuration = provisionConfig, \r\n      callback = object: ProvisioningCallback {\r\n        override fun onSuccess(message: String) {\r\n          Log.i("TapAndPay", "Start provisioning account into Google Wallet.")\r\n        }\r\n\r\n        override fun onFailure(e: Exception) {\r\n          Log.e("TapAndPay", "Error provisioning", e)\r\n        }\r\n    })\r\n  }\r\n}\n'})})}),(0,i.jsx)(s.A,{value:"samsungPay",label:"Samsung Pay",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:'class PushProvisioningActivity: AppCompatActivity() {\r\n  // other code\r\n  private fun pushProvisionPaymentCard() {\r\n    // Call backend to request wallet provisioning token from OF\r\n    val provisionToken = "..."\r\n\r\n    // Initialize OfWalletProvisioningSDK\r\n    val ofPushProvisionSdk = OfPushProvisionSdk.getInstance(\r\n      digitalWallet: DigitalWallet.SAMSUNG_PAY,\r\n      environment = OfEnvironment.Prod\r\n    )\r\n\r\n    // Configure provisioning parameters\r\n    val provisionConfig = ProvisionConfiguration(\r\n      provisionToken = provisionToken\r\n    )\r\n\r\n    // Start provisioning\r\n    ofPushProvisionSdk.startProvisioning(\r\n      activity = this@PushProvisioningActivity,\r\n      configuration = provisioningConfig, \r\n      callback = object: ProvisioningCallback {\r\n        override fun onSuccess(message: String) {\r\n          Log.i("SamsungPay", "Static Token is successfully added into the wallet.")\r\n        }\r\n\r\n        override fun onFailure(e: Exception) {\r\n          Log.e("SamsungPay", "Error provisioning", e)\r\n        }\r\n    })\r\n  }\r\n}\n'})})})]}),"\n",(0,i.jsx)(n.p,{children:"At this point, the digital wallet view will be presented and the customer will go through the process of confirming the addition of the provisioned token into the wallet."}),"\n",(0,i.jsx)(n.h2,{id:"checking-provisioned-token-status-in-the-digital-wallet",children:"Checking provisioned token status in the Digital Wallet"}),"\n",(0,i.jsx)(n.p,{children:'After a customer\u2019s provisioned token is pushed into the digital wallet, its status can be queried at any time. This status can be used to conditionally display the "Add to Wallet" button or for any necessary user experience design.'}),"\n",(0,i.jsxs)(a.A,{children:[(0,i.jsx)(s.A,{value:"applePay",label:"Apple Pay",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:'ofPushProvisionSdk.checkTokenStatus(\r\n  issuerTokenId: issuerTokenId,\r\n  completion: {\r\n    result in\r\n    switch result {\r\n    case .success(let status):\r\n      if status {\r\n        print("Static Token is already in the wallet.")\r\n      } else {\r\n        // Static Token is not in the wallet.\r\n        // Show "Add to Apple Wallet" button\r\n      }\r\n    case .failure(let err):\r\n      // Handle check failure\r\n      print(err.localizedDescription)\r\n    }\r\n  }\r\n)\n'})})}),(0,i.jsx)(s.A,{value:"googlePay",label:"Google Pay",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:'ofPushProvisionSdk.checkTokenStatus(      \r\n  activity = this@PushProvisioningActivity,\r\n  last4DigitsOrIssuerTokenId = issuerTokenId, // or last 4 digits of the account number\r\n  cardNetwork = CardNetwork.MASTERCARD, \r\n  callback = object: CheckTokenStatusCallback {\r\n    override fun onSuccess(tokenized: Boolean) {\r\n      if (status) {\r\n        Log.i("TapAndPay", "Account Token is already added into the wallet.")\r\n      } else {\r\n        // Account Token is not in the wallet.\r\n        // Show "Add to Google Pay" button\r\n      }\r\n    }\r\n\r\n    override fun onFailure(e: Exception) {\r\n      Log.e("TapAndPay", "Error provisioning", e)\r\n    }\r\n  }\r\n)\n'})})}),(0,i.jsx)(s.A,{value:"samsungPay",label:"Samsung Pay",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:'ofPushProvisionSdk.checkTokenStatus(      \r\n  activity = this@PushProvisioningActivity,\r\n  issuerTokenId = issuerTokenId,\r\n  callback = object: CheckTokenStatusCallback {\r\n    override fun onSuccess(tokenized: Boolean) {\r\n      if (status) {\r\n        Log.i("TapAndPay", "Static Token is already added into the wallet.")\r\n      } else {\r\n        // Static Token is not in the wallet.\r\n        // Show "Add to Google Pay" button\r\n      }\r\n    }\r\n\r\n    override fun onFailure(e: Exception) {\r\n      Log.e("TapAndPay", "Error provisioning", e)\r\n    }\r\n  }\r\n)\n'})})})]}),"\n",(0,i.jsx)(n.h2,{id:"removing-a-token-from-the-digital-wallet",children:"Removing a token from the digital wallet"}),"\n",(0,i.jsxs)(n.p,{children:["After a customer\u2019s account is pushed to a digital wallet, you can request that the digital wallet removes the token using the ",(0,i.jsx)(n.code,{children:"issuerTokenId"}),"."]}),"\n",(0,i.jsx)(a.A,{children:(0,i.jsx)(s.A,{value:"googlePay",label:"Google Pay",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:'ofPushProvisionSdk.requestDeleteToken(      \r\n  activity = this@PushProvisioningActivity,\r\n  issuerTokenId = issuerTokenId,\r\n  cardNetwork = CardNetwork.MASTERCARD,\r\n  callback = object: = object: ProvisioningCallback {\r\n        override fun onSuccess(message: String) {\r\n          Log.i("TapAndPay", "Start requesting deleting account token from Google Wallet.")\r\n        }\r\n\r\n        override fun onFailure(e: Exception) {\r\n          Log.e("TapAndPay", "Error requesting delete token", e)\r\n        }\r\n    }\r\n)\n'})})})}),"\n",(0,i.jsxs)(n.p,{children:["The delete request will be processed by the wallet and the result will be sent back to your app via the ",(0,i.jsx)(n.code,{children:"onActivityResult()"})," method."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}}}]);