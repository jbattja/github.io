"use strict";(self.webpackChunk_open_fabric_developer_docs=self.webpackChunk_open_fabric_developer_docs||[]).push([[7947],{11470(e,n,t){t.d(n,{A:()=>S});var r=t(96540),a=t(34164),o=t(17559),i=t(23104),s=t(56347),c=t(205),l=t(57485),u=t(31682),d=t(70679);function h(e){var n,t;return null!=(n=null==(t=r.Children.toArray(e).filter(function(e){return"\n"!==e}).map(function(e){if(!e||(0,r.isValidElement)(e)&&((n=e.props)&&"object"==typeof n&&"value"in n))return e;var n;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')}))?void 0:t.filter(Boolean))?n:[]}function f(e){var n=e.values,t=e.children;return(0,r.useMemo)(function(){var e=null!=n?n:function(e){return h(e).map(function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes,default:n.default}})}(t);return function(e){var n=(0,u.XI)(e,function(e,n){return e.value===n.value});if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map(function(e){return e.value}).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e},[n,t])}function p(e){var n=e.value;return e.tabValues.some(function(e){return e.value===n})}function m(e){var n=e.queryString,t=void 0!==n&&n,a=e.groupId,o=(0,s.W6)(),i=function(e){var n=e.queryString,t=void 0!==n&&n,r=e.groupId;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=r?r:null}({queryString:t,groupId:a});return[(0,l.aZ)(i),(0,r.useCallback)(function(e){if(i){var n=new URLSearchParams(o.location.search);n.set(i,e),o.replace(Object.assign({},o.location,{search:n.toString()}))}},[i,o])]}function g(e){var n,t,a,o,i=e.defaultValue,s=e.queryString,l=void 0!==s&&s,u=e.groupId,h=f(e),g=(0,r.useState)(function(){return function(e){var n,t=e.defaultValue,r=e.tabValues;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:r}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+t+'" but none of its children has the corresponding value. Available values are: '+r.map(function(e){return e.value}).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return t}var a=null!=(n=r.find(function(e){return e.default}))?n:r[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:i,tabValues:h})}),b=g[0],v=g[1],x=m({queryString:l,groupId:u}),j=x[0],_=x[1],y=(n=function(e){return e?"docusaurus.tab."+e:null}({groupId:u}.groupId),t=(0,d.Dv)(n),a=t[0],o=t[1],[a,(0,r.useCallback)(function(e){n&&o.set(e)},[n,o])]),w=y[0],S=y[1],T=function(){var e=null!=j?j:w;return p({value:e,tabValues:h})?e:null}();return(0,c.A)(function(){T&&v(T)},[T]),{selectedValue:b,selectValue:(0,r.useCallback)(function(e){if(!p({value:e,tabValues:h}))throw new Error("Can't select invalid tab value="+e);v(e),_(e),S(e)},[_,S,h]),tabValues:h}}var b=t(92303);const v="tabList__CuJ",x="tabItem_LNqP";var j=t(74848);function _(e){var n=e.className,t=e.block,r=e.selectedValue,o=e.selectValue,s=e.tabValues,c=[],l=(0,i.a_)().blockElementScrollPositionUntilNextRender,u=function(e){var n=e.currentTarget,t=c.indexOf(n),a=s[t].value;a!==r&&(l(n),o(a))},d=function(e){var n,t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":var r,a=c.indexOf(e.currentTarget)+1;t=null!=(r=c[a])?r:c[0];break;case"ArrowLeft":var o,i=c.indexOf(e.currentTarget)-1;t=null!=(o=c[i])?o:c[c.length-1]}null==(n=t)||n.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},n),children:s.map(function(e){var n=e.value,t=e.label,o=e.attributes;return(0,j.jsx)("li",Object.assign({role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:function(e){c.push(e)},onKeyDown:d,onClick:u},o,{className:(0,a.A)("tabs__item",x,null==o?void 0:o.className,{"tabs__item--active":r===n}),children:null!=t?t:n}),n)})})}function y(e){var n=e.lazy,t=e.children,o=e.selectedValue,i=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){var s=i.find(function(e){return e.props.value===o});return s?(0,r.cloneElement)(s,{className:(0,a.A)("margin-top--md",s.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:i.map(function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==o})})})}function w(e){var n=g(e);return(0,j.jsxs)("div",{className:(0,a.A)(o.G.tabs.container,"tabs-container",v),children:[(0,j.jsx)(_,Object.assign({},n,e)),(0,j.jsx)(y,Object.assign({},n,e))]})}function S(e){var n=(0,b.A)();return(0,j.jsx)(w,Object.assign({},e,{children:h(e.children)}),String(n))}},19243(e,n,t){t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>l,default:()=>f,frontMatter:()=>c,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"AccountTokenization/VirtualCards/3DSecure","title":"Virtual Cards","description":"Handle 3D Secure Payments","source":"@site/docs/AccountTokenization/VirtualCards/3DSecure.md","sourceDirName":"AccountTokenization/VirtualCards","slug":"/AccountTokenization/VirtualCards/3DSecure","permalink":"/github.io/docs/AccountTokenization/VirtualCards/3DSecure","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Account Tokenization","permalink":"/github.io/docs/tags/account-tokenization"},{"inline":true,"label":"Token Management","permalink":"/github.io/docs/tags/token-management"}],"version":"current","frontMatter":{"title":"Virtual Cards","tags":["Account Tokenization","Token Management"]},"sidebar":"someSidebar","previous":{"title":"Manage virtual cards","permalink":"/github.io/docs/AccountTokenization/VirtualCards/TokenManagement"},"next":{"title":"Overview","permalink":"/github.io/docs/ProcessingPayments/Overview"}}');var a=t(74848),o=t(28453),i=t(11470),s=t(19365);const c={title:"Virtual Cards",tags:["Account Tokenization","Token Management"]},l="Virtual Cards",u={},d=[{value:"Handle 3D Secure Payments",id:"handle-3d-secure-payments",level:2},{value:"3DS Out of Band (OOB) challenge flow",id:"3ds-out-of-band-oob-challenge-flow",level:3},{value:"3DS OTP flow",id:"3ds-otp-flow",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"virtual-cards",children:"Virtual Cards"})}),"\n",(0,a.jsx)(n.h2,{id:"handle-3d-secure-payments",children:"Handle 3D Secure Payments"}),"\n",(0,a.jsx)(n.p,{children:"3D Secure (3DS) is used to authenticate the customer during an online transaction, adding a layer of security and reducing fraud risk. The core objective of the 3DS phase is to verify the cardholder's identity before the transaction is sent for authorization. Since virtual cards can be used for online/e-commerce payments (also known as a card-not-present scenario), 3DS is a standard requirement."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Merchant's choice"}),": after a customer enters their card details (Card PAN, expiry, CVV) on a merchant's e-commerce site, the merchant triggers 3DS. There are also scenarios where the merchant chooses to skip 3DS, e.g. to reduce friction during checkout."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Open Fabric integration"}),": through the card networks, Open Fabric receives the request to authenticate the cardholder and forwards this to you. You can set up one of the following two flows:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"3DS Out of Band (OOB) challenge flow"})," This flow allows you to challenge the shopper through mobile authentication, such as through a push notification, PIN or biometric verification"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"3DS OTP flow"})," This flow allows you to send an OTP to the shopper, which the shopper can use on the e-commerce site to continue their purchase"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Liability"}),": if an online transaction has not passed 3DS, your cardholder is allowed to initiate a chargeback if the transaction turned out to be fraudulent. If you did challenge the cardholder with 3DS, the merchant can no longer be held liable."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"3ds-out-of-band-oob-challenge-flow",children:"3DS Out of Band (OOB) challenge flow"}),"\n",(0,a.jsx)(n.p,{children:"This flow consists of two main parts for your integration:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Receive OOB Challenge request"}),": Open Fabric sends a ",(0,a.jsx)(n.code,{children:"POST"})," request with transaction details and identifiers (",(0,a.jsx)(n.code,{children:"three_ds_challenge_id"}),", ",(0,a.jsx)(n.code,{children:"transaction_amount"}),", ",(0,a.jsx)(n.code,{children:"tenant_account_ref"}),", etc.) to your system. Your system responds with ",(0,a.jsx)(n.code,{children:"202 Accepted"}),", after which you can initiate challenging to the customer. You can design the authentication challenge yourself, e.g. you can choose to send a push notification to the customer."]}),"\n",(0,a.jsxs)(n.p,{children:["See ",(0,a.jsx)(n.a,{href:"/apis#tag/3D-Secure/operation/threeDsOobChallengeRequest",children:"API Reference for more details"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Send OOB Challenge response"}),": after the customer approves or declines the transaction, your system sends a ",(0,a.jsx)(n.code,{children:"POST"})," request to the Open Fabric ",(0,a.jsx)(n.code,{children:"/v1/3ds/responses"})," endpoint. The response must include the original identifiers and the ",(0,a.jsx)(n.code,{children:"challenge_result"})," (",(0,a.jsx)(n.code,{children:"approved"})," or ",(0,a.jsx)(n.code,{children:"declined"}),"), including a ",(0,a.jsx)(n.code,{children:"reason"})," if declined. Open Fabric confirms receipt with ",(0,a.jsx)(n.code,{children:"202 Accepted"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["See ",(0,a.jsx)(n.a,{href:"/apis#tag/3D-Secure/operation/Update3dsResponses",children:"API Reference for more details"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Examples"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",metastring:'title="Receive OOB Challenge request"',children:'{\r\n  "three_ds_challenge_id": "ffec5b38-74db-485b-a67a-d19adb5777e8",\r\n  "tenant_customer_ref": "CUST001",\r\n  "customer_id": "f5fc485d-9016-4f32-8b49-44e1124a6abc",\r\n  "tenant_account_ref": "FR1234567890",\r\n  "account_id": "9703ac3d-ea7d-492c-9af8-7fabdf88874b",\r\n  "static_token_id": "36f125c2-b215-4d19-a800-d0845d715350",\r\n  "merchant_name": "Amazon.com",\r\n  "transaction_amount": 20.39,\r\n  "transaction_currency": "USD",\r\n  "creation_time": "2024-08-19T07:52:31.812Z"\r\n}\n'})}),"\n",(0,a.jsxs)(i.A,{children:[(0,a.jsx)(s.A,{value:"approved",label:"Challenge Approved",default:!0,children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",metastring:'title="Send OOB Challenge response"',children:'{\r\n  "three_ds_challenge_id": "ffec5b38-74db-485b-a67a-d19adb5777e8",\r\n  "static_token_id": "36f125c2-b215-4d19-a800-d0845d715350",\r\n  "tenant_customer_ref": "CUST001",\r\n  "tenant_account_ref": "FR1234567890",\r\n  "challenge_result": "approved",\r\n  "creation_time": "2024-08-19T07:52:31.812Z"\r\n}\n'})})}),(0,a.jsx)(s.A,{value:"declined",label:"Challenge Declined",default:!0,children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",metastring:'title="Send OOB Challenge response"',children:'{\r\n  "three_ds_challenge_id": "ffec5b38-74db-485b-a67a-d19adb5777e8",\r\n  "static_token_id": "36f125c2-b215-4d19-a800-d0845d715350",\r\n  "tenant_customer_ref": "CUST001",\r\n  "tenant_account_ref": "FR1234567890",\r\n  "challenge_result": "declined",\r\n  "reason": "customer cancelled",\r\n  "creation_time": "2024-08-19T07:52:31.812Z"\r\n}\n'})})})]}),"\n",(0,a.jsx)(n.h3,{id:"3ds-otp-flow",children:"3DS OTP flow"}),"\n",(0,a.jsxs)(n.p,{children:["The 3DS OTP flow is an authentication mechanism where Open Fabric requests your system to send a One-Time Password (OTP) to the customer for transaction verification. After receiving the request containing transaction details and the generated OTP, your system must then deliver this OTP to the customer (typically via SMS or email) and respond with a ",(0,a.jsx)(n.code,{children:"202 Accepted"})," to Open Fabric. Afterwards the customer can enter the OTP on the merchant's site and Open Fabric will verify it with the card network to complete the authentication."]}),"\n",(0,a.jsxs)(n.p,{children:["See ",(0,a.jsx)(n.a,{href:"/apis#tag/3D-Secure/operation/threeDsOtpRequest",children:"API Reference for more details"}),"."]}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsx)(n.p,{children:"You can choose the delivery mechanism of the OTP yourself. For instance via SMS, Email, WhatsApp or your own environment. As SMS tends to be costly, take this into consideration when choosing your options."})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Example"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",metastring:'title="Receive Send OTP request"',children:'{\r\n  "three_ds_challenge_id": "ffec5b38-74db-485b-a67a-d19adb5777e8",\r\n  "tenant_customer_ref": "CUST001",\r\n  "customer_id": "f5fc485d-9016-4f32-8b49-44e1124a6abc",\r\n  "tenant_account_ref": "FR1234567890",\r\n  "account_id": "9703ac3d-ea7d-492c-9af8-7fabdf88874b",\r\n  "static_token_id": "36f125c2-b215-4d19-a800-d0845d715350",\r\n  "merchant_name": "Amazon.com",\r\n  "transaction_amount": 20.39,\r\n  "transaction_currency": "USD",\r\n  "authentication_credential": "768721",\r\n  "creation_time": "2024-08-19T07:52:31.812Z"\r\n}\n'})})]})}function f(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},19365(e,n,t){t.d(n,{A:()=>i});t(96540);var r=t(34164);const a="tabItem_Ymn6";var o=t(74848);function i(e){var n=e.children,t=e.hidden,i=e.className;return(0,o.jsx)("div",{role:"tabpanel",className:(0,r.A)(a,i),hidden:t,children:n})}},28453(e,n,t){t.d(n,{R:()=>i,x:()=>s});var r=t(96540);const a={},o=r.createContext(a);function i(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);